---
title: "Laba1"
author: "Mironova Elena"
date: ' 9 октября 2017'
output: html_document
---
### ЗАДАНИЕ 1.

#### 1. Сгенерируйте 200 случайных значений из стандартного экспоненциального распределения и сохраните в вектор exp.1. Найдите среднее и стандартное отклонение из данных этого вектора.
```{r}
exp.1 <- rexp(200)
mean.1 <- mean(exp.1) #среднее отклонение
sd.1 <- sd(exp.1) #стандарт.отклонение
```

#### 2. Повторите, использовав следующие значения параметра λ: 0.1, 0.5, 5, 10, и сохраните результаты в векторы: exp.0.1, exp.0.5, exp.5, exp.10.
```{r}
#Для 0.1
exp.0.1 <- rexp(200,0.1)
mean.0.1 <- mean(exp.0.1)
sd.0.1 <- sd(exp.0.1)

#Для 0.5
exp.0.5 <- rexp(200,0.5)
mean.0.5 <- mean(exp.0.5)
sd.0.5 <- sd(exp.0.5)

#Для 5
exp.5 <- rexp(200,5)
mean.5 <- mean(exp.5)
sd.5 <- sd(exp.5)

#Для 10
exp.10 <- rexp(200,10)
mean.10 <- mean(exp.10)
sd.10 <- sd(exp.10)
```

#### 3. Функция plot() - общая функция для визуализации данных. Функция hist() принимает данные и раскладывает их по корзинам. Чтобы использовать эти функции, нужно для начала передать им данные, которые хотим визуализировать.

#### 4. Используйте функцию hist() для построения гистограммы полученного ранее стандартного распределения.
```{r}
hist(exp.1, prob = TRUE, main = "Гистограмма станд. эксп. распределения", ylab="Плотность распр-я")
curve(dexp(x), from = 0, to = 8, add = TRUE, col = "red")
```

Вывод: вид гистограммы примерно соответствует виду стандартного экспоненциального распределения, но для столбцов с наибольшей плотностью распределения, отклонения достаточно большие. Возможно из-за небольшого количества наблюдений. Если взять большее кол-во наблюдений - их распределение будет ближе к необходимому.

#### 5. Используйте функцию plot() с тем же самым вектором для построения графика значений в порядке следования.
```{r}
plot(exp.1, xlab="Индекс значения", main="График значений exp.1 в порядке следования")
lines(exp.1)
```

Вывод: Есть разброс значений, значения генерируются в случайном порядке. Есть выброс.

#### 6. Используйте функцию plot() с любыми двумя полученными ранее векторами, чтобы получить диаграмму рассеяния (scatterplot) этих векторов относительно друг друга.
```{r}
plot(exp.0.5,exp.5,main="Диаграмма рассеяния exp.0.5 и exp.5")
```

Вывод: диаграмма  показывает, что между векторами не наблюдается связи, так как точки далеко разбросаны по диаграмме. Таким образом, векторы экспоненциальных распределений с различными значениями λ не являются зависимыми друг от друга.

#### 7. Теперь сравним свойства всех наших векторов. Для начала создадим вектор, содержащий средние значения каждого из 5 полученных ранее распределений в порядке их создания. Полученный вектор сохраним в переменную exp.means.
```{r}
exp.means <- c(mean.1,mean.0.1,mean.0.5,mean.5,mean.10)
```

Далее необходимо создать следующие диаграммы рассеяния:

-	Вектор с пятью средними относительно каждого из пяти векторов с различными значениями λ.
-	Вектор с пятью стандартными отклонениями относительно каждого из пяти векторов с различными значениями λ.
-	Вектор с пятью средними относительно вектора с пятью стандартными отклонениями.
```{r}
exp.par <- c(1, 0.1, 0.5, 5, 10)
exp.sds <- c(sd(exp.1), sd(exp.0.1), sd(exp.0.5), sd(exp.5), sd(exp.10))
par(mfrow = c(3, 1))
plot(exp.means, exp.par, bg = "red", pch = 22)
plot(exp.sds, exp.par, bg = "red", pch = 25)
plot(exp.means, exp.sds, bg = "red", pch = 23)

```

Вывод 1: диаграмма 1 показывает, что между вектором средних и векторами распределений с различными λ нет однозначной линейной связи. 

Вывод 2: диаграмма 2 показывает, что между вектором стандартных отклонений и векторами распределений с различными λ нет однозначной линейной связи. Данная диаграмма полностью совпадает с диаграммой, полученной в предыдущем пункте => есть связь между векторами средних и стандартных отклонений.

Вывод 3: диаграмма показывает, что между вектором средних и вектором стандратных отклонений существует однозначная линейная зависимость.


### ЗАДАНИЕ 2.

R достаточно производителен, чтобы вычислять относительно большие объёмы данных.

#### 1. Для демонстрации сгенерируйте 1100000 (1 млн. 100 тысяч) чисел из стандартного экспоненциального распределения и сохраните их в вектор huge.exp.1. Получите среднее и стандартное отклонение.
```{r}
huge.exp.1 <- rexp(1100000)
huge.exp.1.mean <- mean(huge.exp.1)
huge.exp.1.sd <- sd(huge.exp.1)
```

#### 2. Получите гистограмму huge.exp.1. Она соответствует функции 1 - e:^(-x)? Должна ли?
```{r}
hist(huge.exp.1, prob = TRUE, main = "Гистограмма станд. экспон. распр-я", ylab="Плотность распр-я")
curve(dexp(x), from = 0, to = 8, add = TRUE, col = "red")
```

В данном случае она должна соответствовать не функции ``1 - e:^(-x)`` (функции распределения), а функции плотности распределения ``x*e:^(-x)``.Вид полученной гистограммы соответствует виду стандартного экспоненциального распределения. при увеличении случайных значений вид полученного распределения приблизился к требуемому.

Вид полученной гистограммы действительно соответствует виду стандартного экспоненциального распределения. Отклонения от требуемого распределения стали значительно меньше по сравнению с гистограммой из предыдущего задания, => при увеличении кол-ва наблюдений, вид полученного распределения действительно приблизился к требуемому. 

#### 3. Получите среднее всех чисел из huge.exp.1 строго больших 1. Для проверки выборки может потребоваться новый вектор.
```{r}
mean.trew.1 <- mean(huge.exp.1>1)

#Проверим
check.trew.1 <- huge.exp.1>1
mean.check <- mean(check.trew.1)
mean.trew.1==mean.check
```

#### 4. Получите матрицу huge.exp.1.mat, содержащую 1100 строк и 1000 колонок. Постройте гистограмму, использовав полученную матрицу. Что можно сказать о полученных данных?
```{r}
huge.exp.1.mat<-matrix(huge.exp.1,nrow=1100,ncol=1000)
hist(huge.exp.1.mat, prob = TRUE, main = "Гистограмма станд. эксп. распр-я", ylab="Плотность распр-я")
curve(dexp(x), from = 0, to = 8, add = TRUE, col = "red")
```

Вывод: гистограмма точно такая же как и в пункте 2, а значит вид гистограммы не зависит от способа представления входных данных.

#### 5. Рассчитайте среднее 137-й колонки из huge.exp.1.mat.
```{r}
mean.huge.mat.1.137 <- colMeans(huge.exp.1.mat)[137]
```

#### 6. Найдите среднее всей 1000 колонок и сохраните их в вектор. Отобразите диаграмму средних значений колонок. Объясните, почему форма диаграммы отличается от виденных ранее.
```{r}
mean.sam <- colMeans(huge.exp.1.mat)

#Столбчатая диаграмма
barplot(mean.sam)

#Гистограмма
hist(mean.sam, prob = TRUE, main = "Гистограмма средних значений колонок", ylab="Плотность распр-я")


#Нормальное распределение
mean.norm <- mean(mean.sam)
sd.norm <- sd(mean.sam)
curve(dnorm(x,mean=mean.norm,sd=sd.norm), from = 0.8, to = 1.20, col = "red",add=TRUE)
```

Выводы: вид полученной диаграммы объясняется тем, что среднее значение экспоненциального распределения равняется 1/λ, а в данном случае λ=1, следовательно среднее значение каждой колонки стремится к 1.
Гистограмма практически соответствует нормальному распределению, что может быть объяснено при помощи ЦПТ (сумма большого количества независимых случайных величин имеет распределение, близкое к нормальному). Так как при нахождении среднего значения по колонкам применяется суммирование всех элементов этих колонок, полученные средние значения удовлетворяют данной теореме и в совокупности образуют вектор нормально распределенных случайных величин.

#### 7. Рассчитайте квадрат каждого значения из huge.exp.1 и найдите среднее и стандартное отклонение полученного вектора квадратов. Объясните отличие от соответствующих показателей вектора huge.exp.1. Вам может помочь формула, по которой R рассчитывает стандартное отклонение: ``sqrt(sum((x - mean(x))^2) / (n - 1))``.
```{r}
huge.exp.1.square <- huge.exp.1 ^ 2
huge.exp.1.square.mean <- mean(huge.exp.1.square)
huge.exp.1.square.sd <- sd(huge.exp.1.square)

print(huge.exp.1.square.mean)
print(huge.exp.1.square.sd)
```

Вывод: 
С увеличением значений вектора среднее и стандартное отклонения увеличиваются.
